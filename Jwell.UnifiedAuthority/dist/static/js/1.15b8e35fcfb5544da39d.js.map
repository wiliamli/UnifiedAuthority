{"version":3,"sources":["webpack:///./src/script/menu/editMenu.js","webpack:///./src/components/menu/editMenu.vue?94c0","webpack:///./src/components/menu/editMenu.vue","webpack:///./src/script/menu/checkRole.js","webpack:///./src/components/menu/checkRole.vue?339d","webpack:///./src/components/menu/checkRole.vue","webpack:///./src/script/menu/menu.js","webpack:///./src/views/layout/menu.vue?4f13","webpack:///./src/views/layout/menu.vue"],"names":["editMenu","data","_this","this","parentListData","editDefault","formMenu","EnName","Name","ParentID","RoleID","Url","MenuType","Remark","defaultData","ServiceNumber","CreatedBy","CreatedTime","ModifiedBy","ModifiedTime","getRoles","btnText","loading","parentLoading","ruleMenu","required","validator","rule","value","callback","Error","setTimeout","$publicMethod","chineseOnly","trigger","noSpecialCharacter","props","parentList","Array","checkedRole","checkedRoleId","String","btnValue","editData","Object","methods","checkRole","menuID","_this2","ID","api","serviceNumbner","then","res","console","log","status","Success","$bus","emit","Data","$emit","$Message","error","catch","err","handleMenu","name","_this3","$refs","validate","valid","assign_default","success","handleCancle","resetFields","getBtnValue","watch","_this4","stringify_default","RoleName","push","map","item","index","menu_editMenu","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","border","ref","model","rules","label-width","label","prop","placeholder","$$v","$set","expression","_v","_l","key","_s","type","on","click","color","autosize","minRows","maxRows","$event","staticRenderFns","menu_checkRole","roleList","chooseRole","chooseRolesID","message","show","tip","handleRole","length","i","mounted","IsChecked","components_menu_checkRole","_e","menu","serviceData","serviceNumber","menuList","allMenus","showCheckbox","isShow","checkNode","openMenu","openRole","menuTitle","transferRole","getMenuDatas","allMenu","Each","obj","title","ChildNodes","leftChick","e","button","showMenu","parameter","preventDefault","x","clientX","y","clientY","document","getElementById","mainMenu","path","innerText","style","top","offsetTop","left","offsetLeft","menuBtn","closeMenu","closeRole","dataId","delBtn","chooseMenuId","menuId","components","menuModal","__webpack_require__","normalizeComponent","ssrContext","roleModal","checkRole_normalizeComponent","beforeCreate","created","layout_menu","id","mouseup","contextmenu","to","content","placement","show-checkbox","multiple","children-key","icon","directives","rawName","size","styles","width","footer-hide","openRoleModal","closeMenuModal","reGetMenu","transfer","inner","closeRoleModal","menu_Component","menu_normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/1.15b8e35fcfb5544da39d.js","sourcesContent":["import { getRolesByMenu,saveMenu } from '@/lib/axios/api';\r\n\r\nexport default {\r\n  data () {\r\n    // 菜单中文名验证方法\r\n    const validateCname = (rule, value, callback) => {\r\n        if (value === '') {\r\n            return callback(new Error('请填写菜单中文名'));\r\n        }\r\n        //模拟异步验证效果\r\n        setTimeout(() => {\r\n            if (this.$publicMethod.chineseOnly(value)){\r\n                callback(new Error('菜单中文名只能输入中文字符'));\r\n            } else {\r\n                callback()\r\n            }\r\n        }, 500);\r\n    };\r\n    // 菜单英文名验证方法\r\n    const validateEname = (rule, value, callback) => {\r\n        if (value === '') {\r\n            return callback(new Error('请填写菜单英文名'));\r\n        }\r\n        //模拟异步验证效果\r\n        setTimeout(() => {\r\n            if (this.$publicMethod.noSpecialCharacter(value)){\r\n                callback(new Error('菜单英文名只能输入数字和字母'));\r\n            } else {\r\n                callback()\r\n            }\r\n        }, 500);\r\n    };\r\n    // 父级菜单验证方法\r\n    const validateParent = (rule, value, callback) => {\r\n        if (value === '') {\r\n            callback(new Error('请选择父级菜单'));\r\n        }else {\r\n            callback()\r\n        }\r\n    };\r\n    // 选择角色验证方法\r\n    const validateRole = (rule, value, callback) => {\r\n        if (value === '') {\r\n            callback(new Error('请至少选择一位角色'));\r\n        }else {\r\n            callback();\r\n        }\r\n    };\r\n    // url验证方法\r\n    const validateUrl = (rule, value, callback) => {\r\n        if (value === '') {\r\n            callback(new Error('请填写Url地址'));\r\n        }else {\r\n            callback();\r\n        }\r\n    };\r\n    // 菜单类型验证方法\r\n    const validateType = (rule, value, callback) => {\r\n        if (value === '') {\r\n            callback(new Error('请填写菜单类型'));\r\n        }else {\r\n            callback();\r\n        }\r\n    };\r\n    return {\r\n      parentListData: [],   // 父级菜单(无层级)\r\n      editDefault: {},      // 编辑菜单时带过来的原始值\r\n      formMenu: {           // 新增/编辑菜单输入值\r\n          EnName: '',           // 菜单英文名\r\n          Name: '',             // 菜单中文名\r\n          ParentID: '',         // 父级菜单\r\n          // chooseRole: '',    // 角色选择\r\n          RoleID: '',           // 角色选择\r\n          Url: '',              // url地址\r\n          MenuType: '',         // 菜单类型\r\n          Remark: '',           // 备注\r\n      },\r\n      defaultData: {        // 默认应传递的数据\r\n        ServiceNumber: '1',                           // 当前账户名\r\n        CreatedBy: 'Elsie',                           // 其他\r\n        CreatedTime: '2018-09-18T01:45:50.795Z',      // 其他\r\n        ModifiedBy: 'Li',                             // 其他\r\n        ModifiedTime: '2018-09-18T01:45:50.795Z',     // 其他\r\n      },\r\n      getRoles: [],         // 角色展示\r\n      btnText: '保存',      // 按钮文字\r\n      loading: false,       // 按钮点击加载\r\n      parentLoading: false, // 父级下拉菜单获取中\r\n\r\n      ruleMenu: {           // 整个Form的验证规则\r\n          Name: [           // 菜单中文名\r\n              { required: true, validator: validateCname, trigger: 'blur' }\r\n          ],\r\n          EnName: [         // 菜单英文名\r\n              { required: true, validator: validateEname, trigger: 'blur' }\r\n          ],\r\n          ParentID: [       // 父级菜单\r\n              { required: true, validator: validateParent, trigger: 'blur' }\r\n          ],\r\n          RoleID: [         // 选择角色\r\n              { required: true, validator: validateRole }\r\n          ],\r\n          Url: [            // url\r\n              { required: true, validator: validateUrl, trigger: 'blur' }\r\n          ],\r\n          MenuType: [       // 菜单类型\r\n              { required: true, validator: validateType, trigger: 'blur' }\r\n          ]\r\n      }\r\n    }\r\n  },\r\n  props: {\r\n    parentList: Array,       // 传入所有菜单选项,用于父级菜单下拉\r\n    checkedRole: Array,      // 传入已选角色\r\n    checkedRoleId: String,   // 传入已选角色ID\r\n    btnValue: String,        // 传入是新增弹窗或编辑弹窗时，按钮文字\r\n    editData: Object,        // 传入是否有原始值，新增无，编辑有\r\n  },\r\n  methods: {\r\n    checkRole () {           // 根据菜单获取角色，并打开角色框\r\n      var menuID;\r\n      if(typeof(this.formMenu.ID)==\"undefined\"){\r\n        menuID = 0                  // 新增\r\n      } else {\r\n        menuID = this.formMenu.ID   // 编辑\r\n      };\r\n      getRolesByMenu('/Role/GetEmployeeRolesByMenuID',{\r\n        serviceNumbner:'1',\r\n        menuID: menuID\r\n      })\r\n      .then((res) => {\r\n        console.log('成功',res);\r\n        if((res.status === 200)&&res.data.Success){\r\n          this.$bus.emit('getRoles',res.data.Data);\r\n          this.$emit('openRoleModal')\r\n        }else {\r\n          this.$Message.error('未成功获取此菜单下角色信息，请再试！');\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log('失败',err);\r\n        this.$Message.error('未成功获取此菜单下角色信息，请再试！')\r\n      })\r\n    },\r\n    handleMenu (name) {      // 保存提交按钮\r\n      this.loading = true;\r\n      this.$refs[name].validate((valid) => {\r\n        if (valid) {\r\n          if(!this.formMenu.Remark||this.formMenu.Remark===''){  // 备注可不填，手动添加\r\n            this.formMenu.Remark = '——'\r\n          };\r\n          Object.assign(this.formMenu, this.defaultData);\r\n          console.log(this.formMenu);\r\n          saveMenu('/Menus/Save',this.formMenu)\r\n          .then((res) => {\r\n            console.log('成功',res);\r\n            if ((res.status===200)&&res.data.Success) {\r\n              this.$Message.success('菜单' + this.btnText + '成功!');\r\n              this.$emit('reGetMenu');\r\n              this.formMenu = {};\r\n              this.getRoles = [];\r\n              this.$emit('closeMenuModal');\r\n            }else {\r\n              this.$Message.error(this.btnText+'失败!');\r\n            }\r\n            this.loading = false;\r\n          })\r\n          .catch((err) => {\r\n            console.log('失败',err);\r\n            this.$Message.error(this.btnText+'失败!');\r\n            this.loading = false;\r\n          })\r\n        } else {\r\n            this.$Message.error('请输入正确的信息!');\r\n            this.loading = false\r\n        }\r\n      })\r\n      // this.formMenu.chooseRole = this.getRoles;\r\n    },\r\n    handleCancle (name) {    // 取消按钮\r\n      this.$refs[name].resetFields();\r\n    },\r\n    getBtnValue () {         // 弹窗类型按钮文字赋值\r\n      this.btnText = this.btnValue;\r\n      if( this.btnText === \"新增\") {\r\n        this.getRoles = []\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    parentList () {         // 监听父级传下来的父级菜单数据\r\n      this.parentListData = this.parentList;\r\n    },\r\n    checkedRole () {        // 监听角色变化并展示\r\n      this.getRoles = this.checkedRole;\r\n    },\r\n    checkedRoleId () {      // 监听已选角色id传入\r\n      this.formMenu.RoleID = this.checkedRoleId;\r\n    },\r\n    btnValue () {           // 按钮文字\r\n      this.getBtnValue ();\r\n    },\r\n    editData () {           // 编辑菜单框数据处理\r\n      this.editDefault = this.editData;\r\n      console.log(this.editDefault);\r\n      if(JSON.stringify(this.editDefault) !== '{}') {\r\n        this.getRoles = [];\r\n        if(this.editDefault.RoleName !== ''){\r\n          this.getRoles.push(this.editDefault.RoleName)\r\n        }\r\n        this.formMenu.Name = this.editDefault.Name,\r\n        this.formMenu.EnName = this.editDefault.EnName,\r\n        this.formMenu.RoleID = this.editDefault.RoleID,\r\n        this.formMenu.Url = this.editDefault.Url,\r\n        this.formMenu.MenuType = this.editDefault.MenuType,\r\n        this.formMenu.Remark = this.editDefault.Remark,\r\n        this.formMenu.ID = this.editDefault.ID,\r\n        this.parentListData.map((item,index) => {\r\n          if (item.ID === this.editDefault.ParentID) {\r\n            this.formMenu.ParentID = item.ID;\r\n          }\r\n        })\r\n      }else {\r\n        this.formMenu = {},\r\n        this.getRoles = [],\r\n        console.log('我这里是新增',this.formMenu)\r\n      }\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/script/menu/editMenu.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"editMenuContainer\"},[_c('Card',{staticClass:\"menuCard\",attrs:{\"border\":\"\"}},[_c('Form',{ref:\"formMenu\",attrs:{\"model\":_vm.formMenu,\"rules\":_vm.ruleMenu,\"label-width\":90}},[_c('FormItem',{attrs:{\"label\":\"菜单中文名\",\"prop\":\"Name\"}},[_c('Input',{attrs:{\"placeholder\":\"请输入菜单中文名\"},model:{value:(_vm.formMenu.Name),callback:function ($$v) {_vm.$set(_vm.formMenu, \"Name\", $$v)},expression:\"formMenu.Name\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"菜单英文名\",\"prop\":\"EnName\"}},[_c('Input',{attrs:{\"placeholder\":\"请输入菜单英文名\"},model:{value:(_vm.formMenu.EnName),callback:function ($$v) {_vm.$set(_vm.formMenu, \"EnName\", $$v)},expression:\"formMenu.EnName\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"父级菜单\",\"prop\":\"ParentID\"}},[_c('Select',{attrs:{\"placeholder\":\"请选择父级菜单\"},model:{value:(_vm.formMenu.ParentID),callback:function ($$v) {_vm.$set(_vm.formMenu, \"ParentID\", $$v)},expression:\"formMenu.ParentID\"}},_vm._l((_vm.parentListData),function(item,index){return _c('Option',{key:index,attrs:{\"value\":item.ID}},[_vm._v(_vm._s(item.Name))])}))],1),_vm._v(\" \"),_c('FormItem',{staticClass:\"menuChooseRole\",attrs:{\"label\":\"角色选择\",\"prop\":\"RoleID\"}},[_c('Button',{attrs:{\"type\":\"dashed\"},on:{\"click\":_vm.checkRole}},[_vm._v(\"选择角色\")]),_vm._v(\" \"),_vm._l((_vm.getRoles),function(item,index){return _c('Tag',{key:index,attrs:{\"color\":\"green\"}},[_vm._v(_vm._s(item))])})],2),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"Url\",\"prop\":\"Url\"}},[_c('Input',{attrs:{\"placeholder\":\"请输入-XX-Url地址\"},model:{value:(_vm.formMenu.Url),callback:function ($$v) {_vm.$set(_vm.formMenu, \"Url\", $$v)},expression:\"formMenu.Url\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"菜单类型\",\"prop\":\"MenuType\"}},[_c('Input',{attrs:{\"placeholder\":\"请输入菜单类型\"},model:{value:(_vm.formMenu.MenuType),callback:function ($$v) {_vm.$set(_vm.formMenu, \"MenuType\", $$v)},expression:\"formMenu.MenuType\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"备注\",\"prop\":\"Remark\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 2,maxRows: 5},\"placeholder\":\"请添加菜单备注\"},model:{value:(_vm.formMenu.Remark),callback:function ($$v) {_vm.$set(_vm.formMenu, \"Remark\", $$v)},expression:\"formMenu.Remark\"}})],1),_vm._v(\" \"),_c('FormItem',{staticClass:\"menu-footer\"},[_c('Button',{attrs:{\"type\":\"primary\",\"loading\":_vm.loading},on:{\"click\":function($event){_vm.handleMenu('formMenu')}}},[(!_vm.loading)?_c('span',[_vm._v(_vm._s(_vm.btnText))]):_c('span',[_vm._v(\"加载中...\")])]),_vm._v(\" \"),_c('Button',{on:{\"click\":function($event){_vm.handleCancle('formMenu')}}},[_vm._v(\"重置\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-f788a65a\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/menu/editMenu.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-f788a65a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./editMenu.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!./../../script/menu/editMenu.js\"\nimport __vue_script__ from \"!!babel-loader!./../../script/menu/editMenu.js\"/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-f788a65a\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./editMenu.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-f788a65a\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/menu/editMenu.vue\n// module id = null\n// module chunks = ","export default {\r\n  data () {\r\n    return {\r\n      roleList: [],                       // 获取到此菜单下角色\r\n      chooseRole: [],                     // 已选择角色(用于展示)\r\n      chooseRolesID: '',                  // 已选择角色ID(用于传值)\r\n      loading: false,\r\n      message: {                          // 角色选择规则提示\r\n        show:true,                        // 展示\r\n        tip:''                            // 文字提示\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    handleRole () {                       // 保存角色选择按钮点击\r\n      if (this.chooseRole.length === 0) {\r\n        this.message.show = true,\r\n        this.message.tip = '请至少选择一位角色';\r\n        setTimeout(() => {\r\n            this.message.show = false,\r\n            this.message.tip = ''\r\n        }, 2000);\r\n      } else if (this.chooseRole.length > 1) {\r\n        this.message.show = true,\r\n        this.message.tip = '只能选择一位角色';\r\n        setTimeout(() => {\r\n            this.message.show = false,\r\n            this.message.tip = ''\r\n        }, 2000);\r\n      } else {\r\n        for(let i = 0;i < this.roleList.length;i++){\r\n          if(this.chooseRole[0] === this.roleList[i].RoleName){\r\n            this.chooseRolesID = this.roleList[i].RoleID\r\n          }\r\n        };\r\n        this.$emit('closeRoleModal',this.chooseRole,String(this.chooseRolesID))\r\n      }\r\n      // this.chooseRolesID = [];\r\n      // for(let i = 0;i < this.roleList.length;i++){\r\n      //   for(let j = 0;j < this.chooseRole.length;j++){\r\n      //     if(this.chooseRole[j] === this.roleList[i].RoleName){\r\n      //       this.chooseRolesID.push(Number(this.roleList[i].id))\r\n      //     }\r\n      //   }\r\n      // };\r\n      // this.$emit('closeRoleModal',this.chooseRole,this.chooseRolesID)\r\n    },\r\n    handleCancle () {                     // 关闭角色抽屉\r\n      this.$emit('closeRoleModal')\r\n    }\r\n  },\r\n  mounted () {\r\n    this.$bus.on('getRoles', data => {    // 从新增/编辑菜单处获取'根据菜单获取角色'数据\r\n      data.map(function(item,index){\r\n        if(item.IsChecked){\r\n          chooseRole.push(item.RoleName)\r\n        }\r\n      });\r\n      this.roleList = data;\r\n      console.log('角色',this.roleList);\r\n    });\r\n  },\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/script/menu/checkRole.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"roleContainer\"},[_c('Card',{staticClass:\"roleCard\",attrs:{\"border\":\"\"}},[_c('CheckboxGroup',{staticClass:\"roleGroup\",model:{value:(_vm.chooseRole),callback:function ($$v) {_vm.chooseRole=$$v},expression:\"chooseRole\"}},_vm._l((_vm.roleList),function(item,index){return _c('Checkbox',{key:index,attrs:{\"label\":item.RoleName}},[_c('span',[_vm._v(_vm._s(item.RoleName))])])}))],1),_vm._v(\" \"),(_vm.message.show)?_c('p',{staticClass:\"alertContent\",attrs:{\"type\":\"error\"}},[_vm._v(_vm._s(_vm.message.tip))]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"role-footer\"},[_c('Button',{attrs:{\"type\":\"primary\",\"loading\":_vm.loading},on:{\"click\":_vm.handleRole}},[(!_vm.loading)?_c('span',[_vm._v(\"确定\")]):_c('span',[_vm._v(\"加载中...\")])]),_vm._v(\" \"),_c('Button',{on:{\"click\":_vm.handleCancle}},[_vm._v(\"取消\")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-15b9d98e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/menu/checkRole.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-15b9d98e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./checkRole.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!./../../script/menu/checkRole.js\"\nimport __vue_script__ from \"!!babel-loader!./../../script/menu/checkRole.js\"/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-15b9d98e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./checkRole.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-15b9d98e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/menu/checkRole.vue\n// module id = null\n// module chunks = ","import MenuModal from '@/components/menu/editMenu';\r\nimport RoleModal from '@/components/menu/checkRole';\r\n\r\nimport { menuList,delMenu } from '@/lib/axios/api';\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      serviceData: {        // 服务号，点击从上一级获取\r\n        serviceNumber: '1'\r\n      },\r\n      menuList: [],         //获取到的所有菜单数据(有层级) 树状图\r\n      allMenus: [],         //获取到的所有菜单数据(无层级)\r\n      showCheckbox: false,  //树状图可选择框(暂时不用)\r\n      isShow: false,        //编辑/删除按钮展示\r\n      checkNode: \"\",        //右击树状图节点选中节点暂存\r\n\r\n      openMenu: false,      //打开新增/编辑菜单弹窗 1\r\n      openRole: false,      //打开选择角色弹窗 2\r\n      editData: {},         //编辑菜单时带入初始值\r\n\r\n      menuTitle: \"\",        //弹窗title\r\n      btnValue: \"\",         //菜单按钮文字\r\n      transferRole: false,  //角色按钮文字\r\n\r\n      checkedRole: [],      //已选择角色\r\n      checkedRoleId: '',    //已选择角色Id\r\n    }\r\n  },\r\n  methods: {\r\n    getMenuDatas () {           // 获取到的所有菜单数据\r\n      menuList('/Menus/GetAllMenus',this.serviceData)\r\n      .then((res) => {\r\n        console.log('成功',res);\r\n        if ((res.status === 200)&&res.data.Success) {\r\n          this.menuList = res.data.Data;\r\n          let allMenu = [];\r\n          console.log('有层级菜单',this.menuList);\r\n          function Each(obj){\r\n            for (var i in obj) {\r\n              allMenu.push(obj[i]);\r\n              // obj[i].expand = true;\r\n              obj[i].title = obj[i].Name;\r\n              if (obj[i].ChildNodes.length !== 0) {\r\n                var o = obj[i].ChildNodes\r\n                Each (o)\r\n              }\r\n            }\r\n          }\r\n          Each(this.menuList);            // 递归方法获取所有菜单\r\n          this.allMenus = allMenu;        // 赋值无层级所有菜单\r\n          this.allMenus.push({            // 推入根菜单处\r\n            ID:0,\r\n            Name:'Root'\r\n          });\r\n          console.log('无层级菜单',this.allMenus);\r\n        } else {\r\n          this.$Message.error('未成功获取菜单信息，请再试！')\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log('失败',err);\r\n        this.$Message.error('未成功获取菜单信息，请再试！')\r\n      })\r\n    },\r\n    leftChick (e) {             // 左键点击事件取消右键菜单\r\n      if(e.button === 0){\r\n        this.isShow = false\r\n      };\r\n      this.openRole = false;\r\n      this.openMenu = false;\r\n    },\r\n    showMenu (parameter) {      // 右键菜单\r\n\t\t\tparameter.preventDefault();\r\n      this.isShow = true;       // 右键菜单出现\r\n\t\t\tvar x = parameter.clientX;\r\n\t\t\tvar y = parameter.clientY;\r\n      let menu = document.getElementById('rightMenu');\r\n      let mainMenu = document.getElementById('mainMenu');\r\n      // console.log(mainMenu.offsetLeft,mainMenu.offsetTop);\r\n\t\t\t// console.log(parameter);\r\n      this.checkNode = parameter.path[0].innerText;\r\n      menu.style.top = ((y-mainMenu.offsetTop) + 10) + 'px';\r\n      menu.style.left = ((x-mainMenu.offsetLeft) + 10)+ 'px';\r\n    },\r\n    menuBtn (data) {            // 新增/编辑菜单按钮\r\n      if(data==='add'){\r\n        this.editData = {},\r\n        this.btnValue = '新增',\r\n        this.menuTitle = '新增菜单'\r\n      }else{\r\n        this.allMenus.map((item,index) => {\r\n          if (item.Name === this.checkNode) {\r\n            this.editData = item\r\n          }\r\n        }),\r\n        this.btnValue = '保存',\r\n        this.menuTitle = '编辑菜单'\r\n      };\r\n      this.openMenu = true\r\n    },\r\n    closeMenu () {              // 关闭菜单选择框\r\n      this.openMenu = false;\r\n    },\r\n    chooseRole () {             // 出现角色选择框\r\n      this.openRole = true;\r\n    },\r\n    closeRole (data,dataId) {   // 仅关闭角色选择框\r\n      if(data) {\r\n        this.checkedRole = data;\r\n        this.checkedRoleId = dataId;\r\n      }\r\n      this.openRole = false;\r\n    },\r\n    delBtn () {                 // 删除按钮\r\n      let chooseMenuId;\r\n      this.allMenus.map((item,index) => {\r\n        if (item.Name === this.checkNode) {\r\n          chooseMenuId = item.ID\r\n        }\r\n      })\r\n      delMenu('/Menus/DeleteMenus',{\r\n        serviceNumber:this.serviceData.serviceNumber,           //服务编号\r\n        menuId:chooseMenuId                                    //菜单id\r\n      })\r\n      .then((res) => {\r\n        console.log('成功',res);\r\n        if((res.status === 200)&&res.data.Success){\r\n          this.$Message.success('删除菜单成功');\r\n          this.getMenuDatas()\r\n        } else {\r\n          this.$Message.error('删除菜单失败，请再试！')\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log('失败',err);\r\n        this.$Message.error('删除菜单失败，请再试！')\r\n      })\r\n    },\r\n  },\r\n  components: {\r\n    menuModal: MenuModal,\r\n    roleModal: RoleModal,\r\n  },\r\n  beforeCreate: function () {\r\n    // console.log(this.$route.params.XXX) // 用于获取路由带参\r\n  },\r\n  created: function(){\r\n    this.getMenuDatas()\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/script/menu/menu.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"menuContainer\",attrs:{\"id\":\"mainMenu\"},on:{\"mouseup\":_vm.leftChick}},[_c('div',{staticClass:\"menuTreeBox\",on:{\"contextmenu\":_vm.showMenu}},[_c('Breadcrumb',{staticClass:\"menuBread\"},[_c('BreadcrumbItem',{attrs:{\"to\":\"/\"}},[_c('Icon',{attrs:{\"type\":\"ios-home\"}}),_vm._v(\" 系统首页\\n        \")],1),_vm._v(\" \"),_c('BreadcrumbItem',{attrs:{\"to\":\"/menu\"}},[_c('Icon',{attrs:{\"type\":\"md-menu\"}}),_vm._v(\" 菜单管理\\n        \")],1)],1),_vm._v(\" \"),_c('Tooltip',{attrs:{\"content\":\"点击右键可对菜单进行操作\",\"placement\":\"right-start\"}},[_c('Tree',{staticClass:\"menuTree\",attrs:{\"data\":_vm.menuList,\"show-checkbox\":_vm.showCheckbox,\"multiple\":\"\",\"children-key\":\"ChildNodes\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"handleAdd\"},[_c('Button',{attrs:{\"type\":\"primary\",\"icon\":\"md-add\"},on:{\"click\":function($event){_vm.menuBtn('add')}}},[_vm._v(\"新增菜单\")])],1),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isShow),expression:\"isShow\"}],staticClass:\"handleEdit\",attrs:{\"id\":\"rightMenu\"}},[_c('Button',{attrs:{\"icon\":\"ios-create\",\"size\":\"small\"},on:{\"click\":function($event){_vm.menuBtn('edit')}}},[_vm._v(\"编辑菜单\")]),_vm._v(\" \"),_c('Button',{attrs:{\"icon\":\"ios-trash\",\"size\":\"small\"},on:{\"click\":_vm.delBtn}},[_vm._v(\"删除菜单\")])],1),_vm._v(\" \"),_c('Modal',{attrs:{\"title\":_vm.menuTitle,\"styles\":{top: '10px'},\"width\":\"50\",\"footer-hide\":\"\"},model:{value:(_vm.openMenu),callback:function ($$v) {_vm.openMenu=$$v},expression:\"openMenu\"}},[_c('menuModal',{attrs:{\"checkedRole\":_vm.checkedRole,\"checkedRoleId\":_vm.checkedRoleId,\"btnValue\":_vm.btnValue,\"parentList\":_vm.allMenus,\"editData\":_vm.editData},on:{\"openRoleModal\":_vm.chooseRole,\"closeMenuModal\":_vm.closeMenu,\"reGetMenu\":_vm.getMenuDatas}}),_vm._v(\" \"),_c('Drawer',{attrs:{\"title\":\"选择角色\",\"width\":\"50\",\"transfer\":_vm.transferRole,\"inner\":\"\"},model:{value:(_vm.openRole),callback:function ($$v) {_vm.openRole=$$v},expression:\"openRole\"}},[_c('roleModal',{on:{\"closeRoleModal\":_vm.closeRole}})],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-66bfa465\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/layout/menu.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-66bfa465\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./menu.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!./../../script/menu/menu.js\"\nimport __vue_script__ from \"!!babel-loader!./../../script/menu/menu.js\"/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-66bfa465\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./menu.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-66bfa465\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/layout/menu.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}